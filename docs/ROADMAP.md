# 개발 로드맵

## 현재 상태 (2024-12)

### ✅ 완료된 기능

| 기능 | 파일 | 설명 |
|------|------|------|
| WoRMS 이명 추출 | `src/worms/synonym-extractor.ts` | API 호출, 이명/연도 추출 |
| 검색 URL 생성 | `src/search/search-engine.ts` | Google Scholar, KCI 링크 |
| 엑셀 출력 | `src/output/excel-exporter.ts` | 3개 시트 (요약, 상세, 이명) |
| 웹 뷰어 기본 | `app/page.tsx` | 검색 + 결과 표시 |
| CLI 스크립트 | `scripts/*.ts` | 커맨드라인 검색 |
| 타입 정의 | `src/types/index.ts` | 전체 타입 시스템 |

### 테스트 완료 사항
- [x] WoRMS API 이명 추출 (5개 종 테스트)
- [x] 연도 추출 100% 성공
- [x] 다양한 학명 입력 형식 처리 (9개 형식 테스트)

---

## Phase 1: 기본 기능 완성 (다음 단계)

### 1.1 학명 일괄 입력 🔜

**목표**: 엑셀 파일로 100개 학명 한번에 업로드

```
입력 엑셀 형식:
| 학명                  | 국명     | 비고 |
|----------------------|---------|------|
| Sebastes schlegelii  | 조피볼락 |      |
| Takifugu rubripes    | 자주복   |      |
```

**구현 항목**:
- [ ] 엑셀 업로드 컴포넌트
- [ ] 배치 WoRMS 조회 (딜레이 적용)
- [ ] 진행 상황 표시 (1/100, 2/100...)
- [ ] 결과 일괄 저장

### 1.2 문헌 기록 입력 UI 🔜

**목표**: 검색 후 발견한 문헌 정보를 입력하는 폼

```
┌─────────────────────────────────────────────────┐
│ 문헌 정보 입력                                   │
├─────────────────────────────────────────────────┤
│ 학명: Sebastes schlegelii                       │
│ 검색한 이명: [드롭다운 선택]                      │
│                                                 │
│ 문헌 제목: [                                  ] │
│ 저자: [            ] 연도: [    ]               │
│ 출처: [                                      ]  │
│                                                 │
│ 📍 서식 근거                                     │
│ 페이지: [      ]                                │
│ 원문 인용: [                                  ] │
│ 채집지: [            ]                          │
│ 채집일: [            ]                          │
│ 표본번호: [          ]                          │
│                                                 │
│ 신뢰도: ○ 확정  ○ 유력  ○ 검토필요  ○ 제외      │
│ 메모: [                                      ]  │
│                                                 │
│ [저장] [취소]                                   │
└─────────────────────────────────────────────────┘
```

**구현 항목**:
- [ ] 문헌 입력 폼 컴포넌트
- [ ] 신뢰도 레벨 선택
- [ ] 애매한 이유 다중 선택
- [ ] 입력 데이터 검증

### 1.3 결과 저장/관리 🔜

**목표**: 검색 및 입력 결과를 로컬에 저장

**구현 항목**:
- [ ] JSON 파일 저장/불러오기
- [ ] 또는 SQLite 로컬 DB
- [ ] 이전 검색 결과 목록
- [ ] 검토 상태별 필터링

---

## Phase 2: 편의 기능

### 2.1 PDF 분석

**목표**: 업로드된 PDF에서 학명이 언급된 페이지와 문맥 자동 추출

**도구**: Docling (권장) 또는 pdf-parse

**구현 항목**:
- [ ] PDF 업로드
- [ ] 학명 검색 (현재 종의 모든 이명으로)
- [ ] 매칭된 페이지 + 문맥 표시
- [ ] 결과를 문헌 입력 폼에 자동 채우기

### 2.2 국명 연동

**목표**: KORIB에서 국명 자동 조회

**구현 항목**:
- [ ] KORIB 데이터 연동 방법 조사
- [ ] 국명 자동 표시
- [ ] 기존 최초기록 정보 참조 (있는 경우)

### 2.3 검색 결과 캐싱

**목표**: 동일 학명 재검색 방지

**구현 항목**:
- [ ] WoRMS 결과 캐싱 (24시간)
- [ ] 오프라인 모드 지원

---

## Phase 3: 자동화 (선택)

### 3.1 KCI API 연동

**목표**: 한국 논문 자동 검색

**구현 항목**:
- [ ] KCI Open API 연동
- [ ] 검색 결과 파싱
- [ ] 후보 문헌 자동 목록화

### 3.2 AI 문헌 분석 (선택)

**목표**: LLM으로 서식 근거 1차 판정

**구현 항목**:
- [ ] GPT API 연동
- [ ] 프롬프트 설계 (서식 근거 추출)
- [ ] 결과를 "검토 필요"로 표시 (최종은 수동)

### 3.3 배치 처리

**목표**: 대량 학명 야간 자동 처리

**구현 항목**:
- [ ] 백그라운드 작업 큐
- [ ] 진행 상황 이메일 알림
- [ ] 결과 리포트 자동 생성

---

## 우선순위 요약

```
즉시 (Phase 1):
├── 1.1 학명 일괄 입력 (엑셀)
├── 1.2 문헌 기록 입력 UI
└── 1.3 결과 저장/관리

다음 (Phase 2):
├── 2.1 PDF 분석 (Docling)
├── 2.2 국명 연동 (KORIB)
└── 2.3 검색 결과 캐싱

나중 (Phase 3):
├── 3.1 KCI API 연동
├── 3.2 AI 문헌 분석
└── 3.3 배치 처리
```

---

## 참고: species_checker에서 재사용 가능한 코드

| 기능 | 파일 | 상태 |
|------|------|------|
| API 재시도 | `fetchWithRetry.ts` | ✅ 이미 복사함 |
| 학명 정규화 | `utils.ts` → `normalizeName()` | 필요 시 복사 |
| 엑셀 처리 | `nibrValidator.ts` 참고 | 참고용 |
| 세션 캐시 | `session-cache.ts` | 참고용 |

---

*작성일: 2024-12*
*다음 업데이트: Phase 1 완료 시*
