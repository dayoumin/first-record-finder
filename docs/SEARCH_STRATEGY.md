# 문헌 검색 전략 설계 문서

## 1. 프로젝트 목적

**한국 해양생물의 "최초 기록 문헌"을 찾는 것**

- 특정 종이 한국에서 언제, 어디서, 누구에 의해 처음 기록되었는지 확인
- 단순 분포 목록이 아닌, 실제 채집/관찰 기록이 있는 문헌

---

## 2. 검색 대상 문헌 유형

### 2.1 최초 기록의 두 가지 유형

| 유형 | 설명 | 예시 |
|------|------|------|
| **역사적 최초 기록** | 과거에 처음 기록된 종 | 1900년대 일제강점기 조사에서 처음 발견 |
| **최근 신규 기록** | 기후변화/외래종으로 최근 처음 발견 | 2020년 제주도에서 처음 발견된 열대어 |

### 2.2 검색 목표

```
입력: 학명 (예: Ditrema temminckii)
      ↓
출력: 한국 최초 기록 문헌 (가장 오래된 것 1-3개)
      - 저자, 연도, 제목
      - 채집지, 채집일
      - 신뢰도 (Level 1-4)
```

---

## 3. 문헌 소스 목록

### 3.1 전체 소스 (9개)

| # | 소스 | 언어 | 시기 | 지역 범위 | 용도 | 활성화 |
|---|------|------|------|-----------|------|--------|
| 1 | **BHL** | 영문/다국어 | 1700-1970 | 전 세계 | 역사적 원기재/초기 기록 | ✅ |
| 2 | **J-STAGE** | 일본어/영문 | 1900- | 일본 중심 | 일제강점기 한반도 기록 | ✅ |
| 3 | **CiNii** | 일본어 | 1900- | 일본 학술 | 일제강점기 한반도 기록 | ✅ |
| 4 | **OpenAlex** | 영문 | 1900- | 전 세계 | 현대 영문 논문 (주력) | ✅ |
| 5 | **Semantic Scholar** | 영문 | 1950- | 전 세계 | 현대 영문 논문 (백업) | ⚠️ 선택 |
| 6 | **KCI** | 한국어/영문 | 1990- | 한국 | 한국 학술지 | ✅ |
| 7 | **RISS** | 한국어 | 1980- | 한국 | 한국 학위논문 | ✅ |
| 8 | **GBIF** | 다국어 | - | 전 세계 | 표본 데이터 (보조) | ⚠️ 선택 |
| 9 | **OBIS** | 다국어 | - | 전 세계 | 해양 분포 (보조) | ⚠️ 선택 |

**기본 활성화 소스**: BHL, J-STAGE, CiNii, OpenAlex, KCI, RISS (6개)

### 3.2 한국 관련 키워드 변천사

| 시기 | 영문 표기 | 일본어 표기 | 비고 |
|------|-----------|-------------|------|
| 1800-1910 | **Corea**, Korea | 朝鮮 | Corea가 더 흔함 |
| 1910-1945 | Korea, Corea | **朝鮮**, 韓国 | 일제강점기 |
| 1945-현재 | **Korea** | **韓国** | 현대 |

**중요**: 역사적 문헌(1900년대 초) 검색 시 "Corea" 반드시 포함

---

## 4. 소스별 검색 전략

### 4.1 소스별 Korea 키워드 필요 여부

| 소스 | Korea 키워드 | 이유 |
|------|--------------|------|
| BHL | ✅ 필요 | 전 세계 문헌, 한국 필터링 필요 |
| J-STAGE | ✅ 필요 | 일본 중심 DB, 한국 기록 필터링 |
| CiNii | ✅ 필요 | 일본 중심 DB, 한국 기록 필터링 |
| OpenAlex | ✅ 필요 | 전 세계 문헌, 한국 필터링 필요 |
| Semantic Scholar | ✅ 필요 | 전 세계 문헌, 한국 필터링 필요 |
| **KCI** | ❌ 불필요 | 이미 한국 학술지 DB |
| **RISS** | ❌ 불필요 | 이미 한국 학위논문 DB |
| GBIF/OBIS | ✅ 필요 | 전 세계 데이터 |

### 4.2 BHL (Biodiversity Heritage Library)

**목적**: 원기재(original description) 및 초기 한국 기록 찾기

```
검색 쿼리:
1. 원기재 찾기: "{학명}"
2. 한국 기록:   "{학명}" AND ("Corea" OR "Korea")

연도 범위: 1700-1970
OR 검색 지원: ✅ (AND/OR 문법 지원)
```

### 4.3 J-STAGE / CiNii (일본 학술 DB)

**목적**: 일제강점기 한반도 조사 기록 찾기

```
검색 쿼리 (각각 실행):
1. "{학명}" AND "朝鮮"
2. "{학명}" AND "韓国"
3. "{학명}" AND "Korea"   ← 영문 기록도 포함

연도 범위: 1900-1970
OR 검색 지원: ❓ (확인 필요, 미지원 시 3회 분리 검색)
```

**참고**: 일본 DB에도 영문 제목/초록이 있으므로 "Korea" 키워드 필요

### 4.4 OpenAlex

**목적**: 현대 영문 논문에서 한국 기록 찾기

```
검색 쿼리:
"{학명}" AND "Korea"

연도 범위: 제한 없음 (오래된 것 우선 정렬)
OR 검색 지원: ✅ (filter 파라미터로 지원)
```

### 4.5 Semantic Scholar

**목적**: 현대 영문 논문 (OpenAlex 백업)

```
검색 쿼리:
"{학명}" Korea

연도 범위: 제한 없음
OR 검색 지원: ❌ (단순 키워드 검색)
```

### 4.6 KCI / RISS (한국 학술 DB)

**목적**: 한국어 논문에서 기록 찾기

```
검색 쿼리:
1. "{학명}"
2. "{국명}" (선택, 예: "망상어")

연도 범위: 제한 없음 (오래된 것 우선)
Korea 키워드: ❌ 불필요 (이미 한국 DB)
```

---

## 5. 검색 최적화 전략

### 5.1 이명(Synonym) 처리

```
WoRMS에서 추출된 이명 목록:
- Ditrema temminckii (accepted)
- Ditrema laeve
- Ditrema smitti
- Embiotoca temminckii (original)
- ...

검색 대상 이명 선정 (우선순위):
1. 유효명 (accepted name) - 필수
2. 원기재명 (original combination) - 역사적 문헌에서 중요
3. 과거 유효명 - 선택적
4. 나머지 이명 - 결과 부족 시만
```

### 5.2 검색 횟수 계산

**Phase 1: 유효명만 검색**

| 소스 | 검색 쿼리 | 횟수 |
|------|-----------|------|
| BHL | 학명, 학명+Corea/Korea | 2회 |
| J-STAGE | 학명+朝鮮, 학명+韓国, 학명+Korea | 3회 |
| CiNii | 학명+朝鮮, 학명+韓国, 학명+Korea | 3회 |
| OpenAlex | 학명+Korea | 1회 |
| Semantic Scholar | 학명+Korea | 1회 (선택) |
| KCI | 학명 | 1회 |
| RISS | 학명 | 1회 |
| **합계** | | **11-12회** |

**Phase 2: 결과 부족 시 원기재명으로 추가 검색**

- BHL에서 원기재명 검색: 1-2회
- 합계: 13-15회

**비교**:
- Before: 9개 소스 × 7개 이명 × 2개 전략 = 126회
- After: 11-15회 (약 90% 감소)

### 5.3 분석 대상 선정

**핵심 원칙**: 모든 문헌을 분석할 필요 없음

```
검색 결과 (예: 50건)
    ↓
연도순 정렬 (오래된 것 먼저)
    ↓
상위 5-10건만 LLM 분석
    ↓
한국 기록 확인된 가장 오래된 문헌 = 최초 기록
```

---

## 6. API별 OR 검색 문법

### 6.1 OR 검색 지원 여부 및 문법

| API | OR 지원 | 문법 예시 |
|-----|---------|----------|
| BHL | ✅ | `title:"Ditrema" AND (Corea OR Korea)` |
| OpenAlex | ✅ | `search=Ditrema+Korea` (필터로 처리) |
| J-STAGE | ❓ | 확인 필요, 미지원 시 분리 검색 |
| CiNii | ❓ | 확인 필요, 미지원 시 분리 검색 |
| Semantic Scholar | ❌ | 단순 키워드만 지원 |
| KCI | ❓ | 공공데이터포털 API 확인 필요 |
| RISS | ❓ | 공공데이터포털 API 확인 필요 |

### 6.2 구현 방침

1. **OR 지원 API**: 1회 검색으로 Corea/Korea 모두 커버
2. **OR 미지원 API**:
   - 각 키워드로 분리 검색
   - 첫 번째 결과가 충분하면(5건 이상) 두 번째 생략 가능
3. **한국 DB (KCI/RISS)**: Korea 키워드 자체가 불필요

---

## 7. 구현 체크리스트

### 7.1 검색 모듈 개선
- [ ] 소스별 검색 전략 타입 정의 (SourceSearchStrategy)
- [ ] 한국 키워드 조합 로직 (Corea/Korea, 朝鮮/韓国)
- [ ] OR 검색 지원 여부별 쿼리 생성
- [ ] 이명 우선순위 적용 (유효명 → 원기재명 → 기타)
- [ ] Phase 1/2 검색 로직

### 7.2 분석 모듈 개선
- [ ] 연도순 정렬 후 상위 N건만 분석
- [ ] PDF 다운로드 실패 시 다음 문헌으로 진행
- [ ] 분석 결과 캐싱 (같은 PDF 재분석 방지)

### 7.3 테스트 케이스
- [ ] 역사적 기록 종: 망상어 (Ditrema temminckii)
- [ ] 최근 신규 기록 종: 열대성 어류 예시
- [ ] 이명이 많은 종: 검증용

---

## 8. 참고 자료

### 8.1 Corea vs Korea 표기 역사
- 1800년대: "Corea" 표기가 일반적 (프랑스어 영향)
- 1900년대 초: "Korea"와 "Corea" 혼용
- 1910년 이후: 일제에 의해 "Korea" 표기 확산 (알파벳 순서 이유설)
- 현재: "Korea" 표준, 역사 문헌에서 "Corea" 빈번

### 8.2 일제강점기 한반도 생물상 조사
- 주요 학자: 田中茂穂, 内田恵太郎, 森為三
- 주요 저널: 朝鮮博物学会雑誌, 動物学雑誌
- 시기: 1910-1945

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2025-01-14 | v1.0 | 초안 작성 |
| 2025-01-14 | v1.1 | 리뷰 반영: 소스 목록 통일(9개), J-STAGE/CiNii에 Korea 추가, OR 문법 정리 |
